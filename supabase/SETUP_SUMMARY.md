# Supabase Local Setup - Summary

## What Was Created

### 1. Configuration Files
- **`config.toml`** - Supabase configuration
  - API port: 54321
  - Database port: 54322
  - Studio port: 54323
  - Email testing (Inbucket) port: 54324
  - Email confirmations: **disabled** (users can sign in immediately)
  - Signups: **enabled** by default

### 2. Database Schema (`migrations/20240207000000_initial_schema.sql`)

**Tables created:**
- `categories` - Exercise categories (Abs, Arms, Back, etc.)
- `weight_units` - Weight measurement units (kg, lbs)
- `distance_units` - Distance measurement units (km, mi, m, yd)
- `measurement_types` - Exercise measurement types
- `exercises` - Exercise definitions (user-specific or global)
- `workouts` - Workout logs with sets
- `day_comments` - Daily workout notes
- `settings` - App settings (includes `signups_enabled` flag)

**Security:**
- Row Level Security (RLS) enabled on all tables
- Users can only see/modify their own data
- Reference tables (categories, units) are read-only for all users
- Settings table is read-only for regular users

**Indexes:**
- Optimized for common queries (user_id, date, exercise lookups)

### 3. Seed Data (`seed.sql`)

**Pre-populated data:**
- 7 categories (Abs, Arms, Back, Cardio, Chest, Legs, Shoulders)
- 2 weight units (kg, lbs)
- 4 distance units (km, mi, m, yd)
- 3 measurement types (Weight & Reps, Distance & Time, Time Only)
- 26 common exercises (Bench Press, Squat, Deadlift, etc.)
- 1 settings row with signups enabled

### 4. Documentation
- **`README.md`** - Detailed Supabase local dev guide
- **`../SETUP_LOCAL.md`** - Quick start guide for the whole project

## Next Steps

1. **Start Supabase:**
   ```bash
   supabase start
   ```

2. **Copy the anon key** from the output

3. **Update `.env.local`** with the local credentials

4. **Start your app:**
   ```bash
   npm run dev
   ```

## Adding Your Own Seed Data

To add more seed data, edit `supabase/seed.sql` and add your INSERT statements. Then run:

```bash
supabase db reset
```

This will drop the database, re-run migrations, and re-run the seed file.

## Database Schema Notes

- **Exercises** can be global (no user_id) or user-specific
- **Workouts** are always user-specific
- **Time** is stored as PostgreSQL interval type (e.g., '00:05:30' for 5 minutes 30 seconds)
- **Dates** are stored as DATE type (YYYY-MM-DD)
- **PRs** are tracked with the `is_pr` boolean flag

## Production vs Local

**Local:**
- URL: http://127.0.0.1:54321
- Anon key: Generated by `supabase start`
- Database: PostgreSQL in Docker

**Production:**
- URL: Your Supabase project URL
- Anon key: From Supabase dashboard
- Database: Managed by Supabase

Both use the same schema from the migrations!
